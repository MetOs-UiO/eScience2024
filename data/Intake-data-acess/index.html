
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Acessing model data using intake-esm &#8212; eScience-2024  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/sphinx-toolbox.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_toolbox_installation.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=55b5f74b"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../_static/sphinx_toolbox_installation.js"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data/Intake-data-acess';</script>
    <link rel="icon" href="../../_static/es-logo.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Local shared data" href="../local-data/" />
    <link rel="prev" title="Data" href="../" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/es-logo.png" class="logo__image only-light" alt="eScience-2024  documentation - Home"/>
    <script>document.write(`<img src="../../_static/es-logo.png" class="logo__image only-dark" alt="eScience-2024  documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../">
                    eScience 2024 course
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../feide/">Jupyterhub access</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../course_workflow/">Workflow for eScience2024 course</a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../course_workflow/workflow/">Basic setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../course_workflow/rules/">Basic Rules for the course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../course_workflow/data/">Sharing data</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../basics/">Jupyterhub basic usage</a><input checked class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/start_stop/">Starting and stopping your server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/lab/">The JupyterLab Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/kernels/">Using different kernels in notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/settings/">JupyterLab settings</a></li>

</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../">Data</a><input checked class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Acessing model data using intake-esm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../local-data/">Local shared data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ACTRIS-data/">ACTRIS data</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../learning/">Learning Corner</a><input checked class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/dask_intro/">Brief introduction to Dask</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/from_ebas_using_xarray/">Using xarray to read EBAS data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/interpolate_hybridsigma2pressure_coords/">Interpolate hybrid sigma pressure coordinates to pressure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/making_a_nice_table_for_michael/">Making a nice table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/mask_land/">Mask land</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/masked_and_weighted_average/">Using masks and computing weighted average</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/projections/">Using cartopy and projections for plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/read_PPE/">Read CMIP-PPE data and emulate with Gaussian Processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/some-xarray-pandas-presentation_Sara/">Some tips with xarray and pandas</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../learning/notebooks/xesmf_regridding/">Regridding model data with xESMF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/us-links/">Useful links</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../git_integration/">Using version control on Jupyterhub:</a><input checked class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../git_integration/git_jlab/">Starting with git on the jupyterhub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git_integration/remotes/">Setting up remotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git_integration/github-work/">Pull requests and Issues</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contrib/">Contribute to this page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license/">Credit</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/MetOs-UiO/eScience2024" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/MetOs-UiO/eScience2024/edit/master/docs/data/Intake-data-acess.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/MetOs-UiO/eScience2024/issues/new?title=Issue%20on%20page%20%2Fdata/Intake-data-acess.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/data/Intake-data-acess.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Acessing model data using intake-esm</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-browsing-the-catalog">Reading and browsing the catalog</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#browsing-the-catalog-comparing-the-change-in-aod-over-the-historical-period-across-cmip6-models">Browsing the catalog: Comparing the change in AOD over the historical period across CMIP6 models</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-data-and-plotting">Loading the data and plotting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-a-subset-of-the-catalog">Exporting a subset of the catalog</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="acessing-model-data-using-intake-esm">
<h1>Acessing model data using intake-esm<a class="headerlink" href="#acessing-model-data-using-intake-esm" title="Link to this heading">#</a></h1>
<p>To access the CMIP6 model data and CESM-PPE data we created intake catalogs to help browse and subset the data. The catalogs are stored in shared folder <code class="docutils literal notranslate"><span class="pre">/mnt/craas1-ns9989k-geo4992/data/intake-catalogs/</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importing the required packages</span>
<span class="kn">import</span> <span class="nn">intake</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">intake_esm</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<section id="reading-and-browsing-the-catalog">
<h2>Reading and browsing the catalog<a class="headerlink" href="#reading-and-browsing-the-catalog" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Open the catalog</span>

<span class="c1"># col = intake.open_esm_datastore(&#39;https://storage.googleapis.com/cmip6/pangeo-cmip6.json&#39;) # Remote Pangeo</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="s1">&#39;/mnt/craas1-ns9989k-geo4992/data/catalogs/cmip6.json&#39;</span><span class="p">)</span> <span class="c1"># Local data stored on NIRD</span>
<span class="n">col</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><p><strong>cmip6 catalog with 155 dataset(s) from 536945 asset(s)</strong>:</p> <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>unique</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>variable_id</th>
      <td>583</td>
    </tr>
    <tr>
      <th>table_id</th>
      <td>24</td>
    </tr>
    <tr>
      <th>source_id</th>
      <td>75</td>
    </tr>
    <tr>
      <th>experiment_id</th>
      <td>94</td>
    </tr>
    <tr>
      <th>member_id</th>
      <td>190</td>
    </tr>
    <tr>
      <th>grid_label</th>
      <td>11</td>
    </tr>
    <tr>
      <th>time_range</th>
      <td>9100</td>
    </tr>
    <tr>
      <th>activity_id</th>
      <td>18</td>
    </tr>
    <tr>
      <th>institution_id</th>
      <td>35</td>
    </tr>
    <tr>
      <th>version</th>
      <td>577</td>
    </tr>
    <tr>
      <th>path</th>
      <td>536945</td>
    </tr>
    <tr>
      <th>dcpp_init_year</th>
      <td>0</td>
    </tr>
    <tr>
      <th>derived_variable_id</th>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Under the hood <code class="docutils literal notranslate"><span class="pre">intake-esm</span></code> uses a large table csv, which contains some metadata and the paths of where to find it. The data can be stored both locally or in a remote cloud storage i.e <code class="docutils literal notranslate"><span class="pre">pangeo-cloud</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since the paths listed in the csv table are absolute, notebook starting from the same catalog can be run from any directory, without needing to change the in side the notebook paths.</p>
</div>
<section id="browsing-the-catalog-comparing-the-change-in-aod-over-the-historical-period-across-cmip6-models">
<h3>Browsing the catalog: Comparing the change in AOD over the historical period across CMIP6 models<a class="headerlink" href="#browsing-the-catalog-comparing-the-change-in-aod-over-the-historical-period-across-cmip6-models" title="Link to this heading">#</a></h3>
<p>The keywords when browsing is columns of the table, e.g. <code class="docutils literal notranslate"><span class="pre">variable_id</span></code>, <code class="docutils literal notranslate"><span class="pre">source_uid</span></code> etc. To list all the keys available for a given key word you can use the <code class="docutils literal notranslate"><span class="pre">col.unique()['&lt;keyword&gt;']</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">variable_id</span><span class="o">=</span><span class="s1">&#39;od550aer&#39;</span><span class="p">,</span>
    <span class="n">experiment_id</span><span class="o">=</span><span class="s1">&#39;histSST&#39;</span>
<span class="p">)</span>
<span class="n">col</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><p><strong>cmip6 catalog with 9 dataset(s) from 190 asset(s)</strong>:</p> <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>unique</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>variable_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>table_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>source_id</th>
      <td>9</td>
    </tr>
    <tr>
      <th>experiment_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>member_id</th>
      <td>4</td>
    </tr>
    <tr>
      <th>grid_label</th>
      <td>3</td>
    </tr>
    <tr>
      <th>time_range</th>
      <td>185</td>
    </tr>
    <tr>
      <th>activity_id</th>
      <td>2</td>
    </tr>
    <tr>
      <th>institution_id</th>
      <td>9</td>
    </tr>
    <tr>
      <th>version</th>
      <td>9</td>
    </tr>
    <tr>
      <th>path</th>
      <td>190</td>
    </tr>
    <tr>
      <th>dcpp_init_year</th>
      <td>0</td>
    </tr>
    <tr>
      <th>derived_variable_id</th>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Models available for this request:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span><span class="o">.</span><span class="n">unique</span><span class="p">()[</span><span class="s1">&#39;source_id&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;CNRM-ESM2-1&#39;,
 &#39;MPI-ESM-1-2-HAM&#39;,
 &#39;MIROC6&#39;,
 &#39;UKESM1-0-LL&#39;,
 &#39;MRI-ESM2-0&#39;,
 &#39;GISS-E2-1-G&#39;,
 &#39;CESM2-WACCM&#39;,
 &#39;GFDL-ESM4&#39;,
 &#39;EC-Earth3-AerChem&#39;]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="loading-the-data-and-plotting">
<h2>Loading the data and plotting<a class="headerlink" href="#loading-the-data-and-plotting" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The catalog can be huge, always query and subset catalog before loading the data. Preferably down to level of experiment and variable.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.to_dataset_dict</span></code> function can accept an optional preprocessing function which can be used to harmonize the datasets, temporal resampling, or slicing.
Below we made a preprocessing function for resampling the data into annual means and calculate the global average to allow for easily plotting the time series.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">resample_calculate_and_global_avg</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function to resample the data to annual mean and calculate the global average.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ds</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s1">&#39;YE&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># Resample to annual mean</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">drop_vars</span><span class="p">([</span><span class="s1">&#39;lat_bnds&#39;</span><span class="p">,</span><span class="s1">&#39;lon_bnds&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span> <span class="c1"># create conflict when calculating global average</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lat</span><span class="p">))</span> <span class="c1"># Make weighted global average</span>
    <span class="n">ds_weighted</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">weighted</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
    <span class="n">weighted_mean</span> <span class="o">=</span> <span class="n">ds_weighted</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span><span class="s1">&#39;lat&#39;</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="n">weighted_mean</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Using dask</p>
<p>The processing can be done in parallel using dask, which can speed things up a bit.<br />
The dask cluster below is constrained within the resource each user have available.
The corresponding dask cluster panel can be viewed by clicking on the dask icon <img src="https://upload.wikimedia.org/wikipedia/commons/1/12/Dask_Logo.svg" alt="" width="30" height="30"> on the left-side panel.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">LocalCluster</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">LocalCluster</span><span class="p">(</span><span class="n">n_workers</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">threads_per_worker</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">memory_limit</span><span class="o">=</span><span class="s1">&#39;16GB&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dataset_dict = col.to_dataset_dict()</span>
<span class="n">dataset_dict</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">to_dataset_dict</span><span class="p">(</span><span class="n">xarray_open_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;use_cftime&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;chunks&#39;</span><span class="p">:{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span><span class="mi">48</span><span class="p">}},</span> 
                           <span class="n">aggregate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">preprocess</span><span class="o">=</span><span class="n">resample_calculate_and_global_avg</span><span class="p">,</span>
                           <span class="n">skip_on_error</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">xarray_combine_by_coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;combine_attrs&#39;</span><span class="p">:</span> <span class="s1">&#39;override&#39;</span><span class="p">}</span> 
                          <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>--&gt; The keys in the returned dictionary of datasets are constructed as follows:
	&#39;activity_id.institution_id&#39;
</pre></div>
</div>
<div class="output text_html">
<style>
    /* Turns off some styling */
    progress {
        /* gets rid of default border in Firefox and Opera. */
        border: none;
        /* Needs to be in here for Safari polyfill so background images work as expected. */
        background-size: auto;
    }
    progress:not([value]), progress:not([value])::-webkit-progress-bar {
        background: repeating-linear-gradient(45deg, #7e7e7e, #7e7e7e 10px, #5c5c5c 10px, #5c5c5c 20px);
    }
    .progress-bar-interrupted, .progress-bar-interrupted::-webkit-progress-bar {
        background: #F44336;
    }
</style>
</div><div class="output text_html">
    <div>
      <progress value='9' class='' max='9' style='width:300px; height:20px; vertical-align: middle;'></progress>
      100.00% [9/9 00:13&lt;00:00]
    </div>
    </div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/conda/envs/pangeo-notebook/lib/python3.11/site-packages/xarray/conventions.py:286: SerializationWarning: variable &#39;od550aer&#39; has multiple fill values {1e+20, 1e+20} defined, decoding all values to NaN.
  var = coder.decode(var, name=name)
</pre></div>
</div>
</div>
</div>
<p>Without the providing a <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> function the time aggregated output as dictionary with grouped by the following keys  <code class="docutils literal notranslate"><span class="pre">&quot;activity_id&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;institution_id&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;source_id&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;experiment_id&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;table_id&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;grid_label&quot;</span></code>.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span><span class="o">.</span><span class="n">to_dataset_dict</span><span class="p">(</span><span class="n">xarray_open_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;use_cftime&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;chunks&#39;</span><span class="p">:{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span><span class="mi">48</span><span class="p">}},</span> 
                           <span class="n">aggregate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">skip_on_error</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">xarray_combine_by_coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;combine_attrs&#39;</span><span class="p">:</span> <span class="s1">&#39;override&#39;</span><span class="p">}</span> 
                          <span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>--&gt; The keys in the returned dictionary of datasets are constructed as follows:
	&#39;activity_id.institution_id&#39;
</pre></div>
</div>
<div class="output text_html">
<style>
    /* Turns off some styling */
    progress {
        /* gets rid of default border in Firefox and Opera. */
        border: none;
        /* Needs to be in here for Safari polyfill so background images work as expected. */
        background-size: auto;
    }
    progress:not([value]), progress:not([value])::-webkit-progress-bar {
        background: repeating-linear-gradient(45deg, #7e7e7e, #7e7e7e 10px, #5c5c5c 10px, #5c5c5c 20px);
    }
    .progress-bar-interrupted, .progress-bar-interrupted::-webkit-progress-bar {
        background: #F44336;
    }
</style>
</div><div class="output text_html">
    <div>
      <progress value='9' class='' max='9' style='width:300px; height:20px; vertical-align: middle;'></progress>
      100.00% [9/9 00:06&lt;00:00]
    </div>
    </div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/conda/envs/pangeo-notebook/lib/python3.11/site-packages/xarray/conventions.py:286: SerializationWarning: variable &#39;od550aer&#39; has multiple fill values {1e+20, 1e+20} defined, decoding all values to NaN.
  var = coder.decode(var, name=name)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;AerChemMIP.CNRM-CERFACS&#39;: &lt;xarray.Dataset&gt; Size: 260MB
 Dimensions:      (lat: 128, lon: 256, time: 1980, axis_nbounds: 2, member_id: 1)
 Coordinates:
   * lat          (lat) float64 1kB -88.93 -87.54 -86.14 ... 86.14 87.54 88.93
   * lon          (lon) float64 2kB 0.0 1.406 2.812 4.219 ... 355.8 357.2 358.6
   * time         (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
   * member_id    (member_id) object 8B &#39;r1i1p1f2&#39;
 Dimensions without coordinates: axis_nbounds
 Data variables:
     time_bounds  (time, axis_nbounds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
     od550aer     (member_id, time, lat, lon) float32 260MB dask.array&lt;chunksize=(1, 48, 128, 256), meta=np.ndarray&gt;
 Attributes: (12/65)
     Conventions:                      CF-1.7 CMIP-6.2
     creation_date:                    2018-08-08T14:22:32Z
     description:                      Historical transient with SSTs prescrib...
     title:                            CNRM-ESM2-1 model output prepared for C...
     activity_id:                      AerChemMIP
     contact:                          contact.cmip@meteo.fr
     ...                               ...
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  CNRM-CERFACS
     intake_esm_attrs:version:         v20190621
     intake_esm_attrs:path:            /mnt/craas1-ns9989k-ns9560k/ESGF/CMIP6/...
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.CNRM-CERFACS,
 &#39;AerChemMIP.NOAA-GFDL&#39;: &lt;xarray.Dataset&gt; Size: 411MB
 Dimensions:    (bnds: 2, lat: 180, lon: 288, member_id: 1, time: 1980)
 Coordinates:
   * bnds       (bnds) float64 16B 1.0 2.0
   * lat        (lat) float64 1kB -89.5 -88.5 -87.5 -86.5 ... 86.5 87.5 88.5 89.5
     lat_bnds   (lat, bnds) float64 3kB dask.array&lt;chunksize=(180, 2), meta=np.ndarray&gt;
   * lon        (lon) float64 2kB 0.625 1.875 3.125 4.375 ... 356.9 358.1 359.4
     lon_bnds   (lon, bnds) float64 5kB dask.array&lt;chunksize=(288, 2), meta=np.ndarray&gt;
   * time       (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
     time_bnds  (time, bnds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
   * member_id  (member_id) object 8B &#39;r1i1p1f1&#39;
 Data variables:
     od550aer   (member_id, time, lat, lon) float32 411MB dask.array&lt;chunksize=(1, 48, 180, 288), meta=np.ndarray&gt;
 Attributes: (12/56)
     external_variables:               areacella
     history:                          File was processed by fremetar (GFDL an...
     table_id:                         AERmon
     activity_id:                      AerChemMIP
     branch_method:                    atmospheric and land state taken from p...
     branch_time_in_child:             0.0
     ...                               ...
     intake_esm_attrs:grid_label:      gr1
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  NOAA-GFDL
     intake_esm_attrs:version:         v20180701
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.NOAA-GFDL,
 &#39;AerChemMIP.NCAR&#39;: &lt;xarray.Dataset&gt; Size: 438MB
 Dimensions:    (member_id: 1, time: 1980, lat: 192, lon: 288, nbnd: 2)
 Coordinates:
   * lat        (lat) float64 2kB -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0
   * lon        (lon) float64 2kB 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8
   * time       (time) object 16kB 1850-01-15 12:00:00 ... 2014-12-15 12:00:00
     time_bnds  (time, nbnd) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
     lat_bnds   (lat, nbnd) float32 2kB dask.array&lt;chunksize=(192, 2), meta=np.ndarray&gt;
     lon_bnds   (lon, nbnd) float32 2kB dask.array&lt;chunksize=(288, 2), meta=np.ndarray&gt;
   * member_id  (member_id) object 8B &#39;r1i2p1f1&#39;
 Dimensions without coordinates: nbnd
 Data variables:
     od550aer   (member_id, time, lat, lon) float32 438MB dask.array&lt;chunksize=(1, 48, 192, 288), meta=np.ndarray&gt;
 Attributes: (12/56)
     Conventions:                      CF-1.7 CMIP-6.2
     activity_id:                      AerChemMIP
     branch_method:                    no parent
     branch_time_in_child:             674885.0
     branch_time_in_parent:            0.0
     case_id:                          47
     ...                               ...
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  NCAR
     intake_esm_attrs:version:         v20190531
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.NCAR,
 &#39;AerChemMIP.NASA-GISS&#39;: &lt;xarray.Dataset&gt; Size: 103MB
 Dimensions:    (time: 1980, bnds: 2, lat: 90, lon: 144, member_id: 1)
 Coordinates:
   * time       (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
     time_bnds  (time, bnds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
   * lat        (lat) float64 720B -89.0 -87.0 -85.0 -83.0 ... 85.0 87.0 89.0
     lat_bnds   (lat, bnds) float64 1kB dask.array&lt;chunksize=(90, 2), meta=np.ndarray&gt;
   * lon        (lon) float64 1kB 1.25 3.75 6.25 8.75 ... 351.2 353.8 356.2 358.8
     lon_bnds   (lon, bnds) float64 2kB dask.array&lt;chunksize=(144, 2), meta=np.ndarray&gt;
   * member_id  (member_id) object 8B &#39;r1i1p3f1&#39;
 Dimensions without coordinates: bnds
 Data variables:
     od550aer   (member_id, time, lat, lon) float32 103MB dask.array&lt;chunksize=(1, 48, 90, 144), meta=np.ndarray&gt;
 Attributes: (12/56)
     Conventions:                      CF-1.7 CMIP-6.2
     activity_id:                      AerChemMIP
     branch_method:                    standard
     branch_time_in_child:             0.0
     branch_time_in_parent:            0.0
     contact:                          Kenneth Lo (cdkkl@giss.nasa.gov)
     ...                               ...
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  NASA-GISS
     intake_esm_attrs:version:         v20191120
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.NASA-GISS,
 &#39;AerChemMIP.MIROC&#39;: &lt;xarray.Dataset&gt; Size: 260MB
 Dimensions:     (time: 1980, bnds: 2, lat: 128, lon: 256, member_id: 1)
 Coordinates:
   * time        (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
     time_bnds   (time, bnds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
   * lat         (lat) float64 1kB -88.93 -87.54 -86.14 ... 86.14 87.54 88.93
     lat_bnds    (lat, bnds) float64 2kB dask.array&lt;chunksize=(128, 2), meta=np.ndarray&gt;
   * lon         (lon) float64 2kB 0.0 1.406 2.812 4.219 ... 355.8 357.2 358.6
     lon_bnds    (lon, bnds) float64 4kB dask.array&lt;chunksize=(256, 2), meta=np.ndarray&gt;
     wavelength  float64 8B 550.0
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Dimensions without coordinates: bnds
 Data variables:
     od550aer    (member_id, time, lat, lon) float32 260MB dask.array&lt;chunksize=(1, 48, 128, 256), meta=np.ndarray&gt;
 Attributes: (12/53)
     Conventions:                      CF-1.7 CMIP-6.2
     activity_id:                      AerChemMIP
     branch_method:                    standard
     branch_time_in_child:             0.0
     branch_time_in_parent:            0.0
     data_specs_version:               01.00.31
     ...                               ...
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  MIROC
     intake_esm_attrs:version:         v20190828
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.MIROC,
 &#39;AerChemMIP.MOHC&#39;: &lt;xarray.Dataset&gt; Size: 219MB
 Dimensions:     (time: 1980, bnds: 2, lat: 144, lon: 192, member_id: 1)
 Coordinates:
   * time        (time) object 16kB 1850-01-16 00:00:00 ... 2014-12-16 00:00:00
     time_bnds   (time, bnds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
   * lat         (lat) float64 1kB -89.38 -88.12 -86.88 ... 86.88 88.12 89.38
     lat_bnds    (lat, bnds) float64 2kB dask.array&lt;chunksize=(144, 2), meta=np.ndarray&gt;
   * lon         (lon) float64 2kB 0.9375 2.812 4.688 6.562 ... 355.3 357.2 359.1
     lon_bnds    (lon, bnds) float64 3kB dask.array&lt;chunksize=(192, 2), meta=np.ndarray&gt;
     wavelength  float64 8B 550.0
   * member_id   (member_id) object 8B &#39;r1i1p1f2&#39;
 Dimensions without coordinates: bnds
 Data variables:
     od550aer    (member_id, time, lat, lon) float32 219MB dask.array&lt;chunksize=(1, 48, 144, 192), meta=np.ndarray&gt;
 Attributes: (12/56)
     Conventions:                      CF-1.7 CMIP-6.2
     activity_id:                      AerChemMIP
     branch_time_in_child:             0.0
     data_specs_version:               01.00.29
     experiment:                       historical prescribed SSTs and historic...
     experiment_id:                    histSST
     ...                               ...
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  MOHC
     intake_esm_attrs:version:         v20190902
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.MOHC,
 &#39;AerChemMIP.MRI&#39;: &lt;xarray.Dataset&gt; Size: 406MB
 Dimensions:     (time: 1980, bnds: 2, lat: 160, lon: 320, member_id: 1)
 Coordinates:
   * time        (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
   * lat         (lat) float64 1kB -89.14 -88.03 -86.91 ... 86.91 88.03 89.14
   * lon         (lon) float64 3kB 0.0 1.125 2.25 3.375 ... 356.6 357.8 358.9
     wavelength  float64 8B ...
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Dimensions without coordinates: bnds
 Data variables:
     time_bnds   (time, bnds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
     lat_bnds    (lat, bnds) float64 3kB dask.array&lt;chunksize=(160, 2), meta=np.ndarray&gt;
     lon_bnds    (lon, bnds) float64 5kB dask.array&lt;chunksize=(320, 2), meta=np.ndarray&gt;
     od550aer    (member_id, time, lat, lon) float32 406MB dask.array&lt;chunksize=(1, 48, 160, 320), meta=np.ndarray&gt;
 Attributes: (12/59)
     Conventions:                      CF-1.7 CMIP-6.2
     activity_id:                      AerChemMIP
     branch_method:                    standard (the actual parent run: RFMIP ...
     branch_time_in_child:             0.0
     branch_time_in_parent:            0.0
     comment:                          This od550aer includes AOD from stratos...
     ...                               ...
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  MRI
     intake_esm_attrs:version:         v20200207
     intake_esm_attrs:path:            /mnt/craas1-ns9989k-ns9560k/ESGF/CMIP6/...
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.MRI,
 &#39;AerChemMIP.HAMMOZ-Consortium&#39;: &lt;xarray.Dataset&gt; Size: 146MB
 Dimensions:     (time: 1980, bnds: 2, lat: 96, lon: 192, member_id: 1)
 Coordinates:
   * time        (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
     time_bnds   (time, bnds) object 32kB dask.array&lt;chunksize=(48, 2), meta=np.ndarray&gt;
   * lat         (lat) float64 768B -88.57 -86.72 -84.86 ... 84.86 86.72 88.57
     lat_bnds    (lat, bnds) float64 2kB dask.array&lt;chunksize=(96, 2), meta=np.ndarray&gt;
   * lon         (lon) float64 2kB 0.0 1.875 3.75 5.625 ... 354.4 356.2 358.1
     lon_bnds    (lon, bnds) float64 3kB dask.array&lt;chunksize=(192, 2), meta=np.ndarray&gt;
     wavelength  float64 8B 550.0
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Dimensions without coordinates: bnds
 Data variables:
     od550aer    (member_id, time, lat, lon) float32 146MB dask.array&lt;chunksize=(1, 48, 96, 192), meta=np.ndarray&gt;
 Attributes: (12/57)
     CDO:                              Climate Data Operators version 1.9.9rc8...
     Conventions:                      CF-1.7 CMIP-6.2
     activity_id:                      AerChemMIP
     branch_method:                    standard
     branch_time_in_child:             0.0
     branch_time_in_parent:            0.0
     ...                               ...
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  HAMMOZ-Consortium
     intake_esm_attrs:version:         v20190628
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.HAMMOZ-Consortium,
 &#39;CMIP.EC-Earth-Consortium&#39;: &lt;xarray.Dataset&gt; Size: 86MB
 Dimensions:     (time: 1980, bnds: 2, lat: 90, lon: 120, member_id: 1)
 Coordinates:
   * time        (time) object 16kB 1850-01-16 12:00:00 ... 2014-12-16 12:00:00
     time_bnds   (time, bnds) object 32kB dask.array&lt;chunksize=(12, 2), meta=np.ndarray&gt;
   * lat         (lat) float64 720B -89.0 -87.0 -85.0 -83.0 ... 85.0 87.0 89.0
     lat_bnds    (lat, bnds) float64 1kB dask.array&lt;chunksize=(90, 2), meta=np.ndarray&gt;
   * lon         (lon) float64 960B 1.5 4.5 7.5 10.5 ... 349.5 352.5 355.5 358.5
     lon_bnds    (lon, bnds) float64 2kB dask.array&lt;chunksize=(120, 2), meta=np.ndarray&gt;
     wavelength  float64 8B 550.0
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Dimensions without coordinates: bnds
 Data variables:
     od550aer    (member_id, time, lat, lon) float32 86MB dask.array&lt;chunksize=(1, 12, 90, 120), meta=np.ndarray&gt;
 Attributes: (12/57)
     Conventions:                        CF-1.7 CMIP-6.2
     activity_id:                        AerChemMIP
     branch_method:                      standard
     branch_time_in_child:               0.0
     branch_time_in_parent:              0.0
     contact:                            cmip6-data@ec-earth.org
     ...                                 ...
     intake_esm_attrs:grid_label:        gn
     intake_esm_attrs:activity_id:       CMIP
     intake_esm_attrs:institution_id:    EC-Earth-Consortium
     intake_esm_attrs:version:           v20210309
     intake_esm_attrs:_data_format_:     netcdf
     intake_esm_dataset_key:             CMIP.EC-Earth-Consortium}
</pre></div>
</div>
</div>
</details>
</div>
<p>Preprocess dictionary only contain the time series, which is easy to loop over and plot for each model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_dict</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;AerChemMIP.NASA-GISS&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:    (time: 165, member_id: 1)
 Coordinates:
   * time       (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id  (member_id) object 8B &#39;r1i1p3f1&#39;
 Data variables:
     od550aer   (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       GISS-E2-1-G
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p3f1
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  NASA-GISS
     intake_esm_attrs:version:         v20191120
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.NASA-GISS,
 &#39;AerChemMIP.CNRM-CERFACS&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:    (time: 165, member_id: 1)
 Coordinates:
   * time       (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id  (member_id) object 8B &#39;r1i1p1f2&#39;
 Data variables:
     od550aer   (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes: (12/14)
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       CNRM-ESM2-1
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f2
     ...                               ...
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  CNRM-CERFACS
     intake_esm_attrs:version:         v20190621
     intake_esm_attrs:path:            /mnt/craas1-ns9989k-ns9560k/ESGF/CMIP6/...
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.CNRM-CERFACS,
 &#39;AerChemMIP.NCAR&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:    (time: 165, member_id: 1)
 Coordinates:
   * time       (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id  (member_id) object 8B &#39;r1i2p1f1&#39;
 Data variables:
     od550aer   (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       CESM2-WACCM
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i2p1f1
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  NCAR
     intake_esm_attrs:version:         v20190531
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.NCAR,
 &#39;AerChemMIP.NOAA-GFDL&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:    (time: 165, member_id: 1)
 Coordinates:
   * time       (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id  (member_id) object 8B &#39;r1i1p1f1&#39;
 Data variables:
     od550aer   (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       GFDL-ESM4
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f1
     intake_esm_attrs:grid_label:      gr1
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  NOAA-GFDL
     intake_esm_attrs:version:         v20180701
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.NOAA-GFDL,
 &#39;AerChemMIP.MIROC&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:     (time: 165, member_id: 1)
 Coordinates:
     wavelength  float64 8B 550.0
   * time        (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Data variables:
     od550aer    (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       MIROC6
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f1
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  MIROC
     intake_esm_attrs:version:         v20190828
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.MIROC,
 &#39;AerChemMIP.MOHC&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:     (time: 165, member_id: 1)
 Coordinates:
     wavelength  float64 8B 550.0
   * time        (time) object 1kB 1850-12-30 00:00:00 ... 2014-12-30 00:00:00
   * member_id   (member_id) object 8B &#39;r1i1p1f2&#39;
 Data variables:
     od550aer    (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       UKESM1-0-LL
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f2
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  MOHC
     intake_esm_attrs:version:         v20190902
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.MOHC,
 &#39;AerChemMIP.HAMMOZ-Consortium&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:     (time: 165, member_id: 1)
 Coordinates:
     wavelength  float64 8B 550.0
   * time        (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Data variables:
     od550aer    (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       MPI-ESM-1-2-HAM
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f1
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  HAMMOZ-Consortium
     intake_esm_attrs:version:         v20190628
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.HAMMOZ-Consortium,
 &#39;AerChemMIP.MRI&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:     (time: 165, member_id: 1)
 Coordinates:
     wavelength  float64 8B 550.0
   * time        (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Data variables:
     od550aer    (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 4), meta=np.ndarray&gt;
 Attributes: (12/14)
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       MRI-ESM2-0
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f1
     ...                               ...
     intake_esm_attrs:activity_id:     AerChemMIP
     intake_esm_attrs:institution_id:  MRI
     intake_esm_attrs:version:         v20200207
     intake_esm_attrs:path:            /mnt/craas1-ns9989k-ns9560k/ESGF/CMIP6/...
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           AerChemMIP.MRI,
 &#39;CMIP.EC-Earth-Consortium&#39;: &lt;xarray.Dataset&gt; Size: 3kB
 Dimensions:     (time: 165, member_id: 1)
 Coordinates:
     wavelength  float64 8B 550.0
   * time        (time) object 1kB 1850-12-31 00:00:00 ... 2014-12-31 00:00:00
   * member_id   (member_id) object 8B &#39;r1i1p1f1&#39;
 Data variables:
     od550aer    (member_id, time) float64 1kB dask.array&lt;chunksize=(1, 1), meta=np.ndarray&gt;
 Attributes:
     intake_esm_vars:                  [&#39;od550aer&#39;]
     intake_esm_attrs:variable_id:     od550aer
     intake_esm_attrs:table_id:        AERmon
     intake_esm_attrs:source_id:       EC-Earth3-AerChem
     intake_esm_attrs:experiment_id:   histSST
     intake_esm_attrs:member_id:       r1i1p1f1
     intake_esm_attrs:grid_label:      gn
     intake_esm_attrs:activity_id:     CMIP
     intake_esm_attrs:institution_id:  EC-Earth-Consortium
     intake_esm_attrs:version:         v20210309
     intake_esm_attrs:_data_format_:   netcdf
     intake_esm_dataset_key:           CMIP.EC-Earth-Consortium}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="k">for</span> <span class="n">datakey</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="c1"># Looping over ever varable in the dictionary</span>
    <span class="n">source_id</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;intake_esm_attrs:source_id&#39;</span><span class="p">]</span>
    <span class="n">member_id</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;intake_esm_attrs:member_id&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;od550aer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">member_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">member_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7fa1fc40f110&gt;
</pre></div>
</div>
<img alt="../../_images/1ce8477193212fee86cf48b45f0742f9510c9b130e3820534a8d57922614db8e.png" src="../../_images/1ce8477193212fee86cf48b45f0742f9510c9b130e3820534a8d57922614db8e.png" />
</div>
</div>
<section id="exporting-a-subset-of-the-catalog">
<h3>Exporting a subset of the catalog<a class="headerlink" href="#exporting-a-subset-of-the-catalog" title="Link to this heading">#</a></h3>
<p>Most likely you will only be analyzing a small subset of experiments the model experiment and it could be beneficial to work with a reduced catalog.
Below we will make a subset that only contain the information related to <code class="docutils literal notranslate"><span class="pre">histSST</span></code> and <code class="docutils literal notranslate"><span class="pre">histSST-piaer</span></code>, and only the absorption optical depth (<code class="docutils literal notranslate"><span class="pre">od550abs</span></code>) and total optical depth (<code class="docutils literal notranslate"><span class="pre">od550aer</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="s1">&#39;/mnt/craas1-ns9989k-geo4992/data/cmip6.json&#39;</span><span class="p">)</span> <span class="c1"># Local data stored on NIRD</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>    
    <span class="n">experiment_id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;histSST&#39;</span><span class="p">,</span> <span class="s1">&#39;histSST-piaer&#39;</span><span class="p">],</span>
    <span class="n">variable_id</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;od550abs&#39;</span><span class="p">,</span> <span class="s1">&#39;od550aer&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">col</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><p><strong>cmip6 catalog with 9 dataset(s) from 190 asset(s)</strong>:</p> <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>unique</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>variable_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>table_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>source_id</th>
      <td>9</td>
    </tr>
    <tr>
      <th>experiment_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>member_id</th>
      <td>4</td>
    </tr>
    <tr>
      <th>grid_label</th>
      <td>3</td>
    </tr>
    <tr>
      <th>time_range</th>
      <td>185</td>
    </tr>
    <tr>
      <th>activity_id</th>
      <td>2</td>
    </tr>
    <tr>
      <th>institution_id</th>
      <td>9</td>
    </tr>
    <tr>
      <th>version</th>
      <td>9</td>
    </tr>
    <tr>
      <th>path</th>
      <td>190</td>
    </tr>
    <tr>
      <th>dcpp_init_year</th>
      <td>0</td>
    </tr>
    <tr>
      <th>derived_variable_id</th>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Then when we are happy with the selection the catalog can be exported as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;histSST-AerChemMIP&#39;</span><span class="p">,</span><span class="n">catalog_type</span><span class="o">=</span><span class="s1">&#39;file&#39;</span><span class="p">,</span><span class="n">directory</span><span class="o">=</span><span class="s1">&#39;~/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Successfully wrote ESM catalog json file to: file:///home/fc-3auid-3a9fdc0c87-2d7836-2d4bdc-2db802-2d9a250c322e3b//histSST-AerChemMIP.json
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="s1">&#39;~/histSST-AerChemMIP.json&#39;</span><span class="p">)</span>
<span class="n">col</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><p><strong>histSST-AerChemMIP catalog with 9 dataset(s) from 190 asset(s)</strong>:</p> <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>unique</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>variable_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>table_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>source_id</th>
      <td>9</td>
    </tr>
    <tr>
      <th>experiment_id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>member_id</th>
      <td>4</td>
    </tr>
    <tr>
      <th>grid_label</th>
      <td>3</td>
    </tr>
    <tr>
      <th>time_range</th>
      <td>185</td>
    </tr>
    <tr>
      <th>activity_id</th>
      <td>2</td>
    </tr>
    <tr>
      <th>institution_id</th>
      <td>9</td>
    </tr>
    <tr>
      <th>version</th>
      <td>9</td>
    </tr>
    <tr>
      <th>path</th>
      <td>190</td>
    </tr>
    <tr>
      <th>dcpp_init_year</th>
      <td>0</td>
    </tr>
    <tr>
      <th>derived_variable_id</th>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Data</p>
      </div>
    </a>
    <a class="right-next"
       href="../local-data/"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Local shared data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-browsing-the-catalog">Reading and browsing the catalog</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#browsing-the-catalog-comparing-the-change-in-aod-over-the-historical-period-across-cmip6-models">Browsing the catalog: Comparing the change in AOD over the historical period across CMIP6 models</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-data-and-plotting">Loading the data and plotting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-a-subset-of-the-catalog">Exporting a subset of the catalog</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By MetOs-UiO
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, MetOs, UiO.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>